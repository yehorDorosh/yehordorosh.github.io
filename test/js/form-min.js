"use strict";let messageBlock;function showMessage(){let e=document.createElement("div");e.className="message",document.body.appendChild(e),e.style.left="50%",e.style.top="50%";let t=document.createElement("div");return t.className="ok-btn",t.innerHTML="OK",document.body.lastChild.appendChild(t),t.style.left="50%",t.style.top="50%",messageBlock=e,!0}function hideMessage(e){e&&(document.body.removeChild(e),e=null)}function showError(e){"object"==typeof e&&e.classList.add("error")}function resetError(e){"object"==typeof e&&e.classList.remove("error")}function checkValidInput(e,t,n){null!=e.value.match(t)||!n&&!e.value?e.isValid=!0:(e.isValid=!1,showError(e))}function validate(e){let t=e.elements;for(let e in t)resetError(t[e]);checkValidInput(t.name,/^[а-яА-ЯёЁa-zA-Z]+$/,!0),checkValidInput(t.surname,/^[а-яА-ЯёЁa-zA-Z]+$/,!0),checkValidInput(t.tel,/^[0-9()\-+ ]+$/,!0),checkValidInput(t.email,/[a-zA-Z0-9_]+@[a-zA-Z0-9_]/,!1);for(let e in t)if("object"==typeof t[e]&&0==t[e].isValid)return!1;return!0}function request(){return new Promise(function(e,t){setTimeout(function(){e(showMessage())},2e3)})}let form=document.forms.registration,btnSubmit=document.getElementsByName("submit");form.onclick=function(e){let t=e.target;"submit"!=t.name&&resetError(t),"submit"==t.name&&(form.onsubmit=function(){return!!validate(form)&&(request().then(e=>{btnSubmit[0].disabled=!0,btnSubmit[0].classList.remove("btn"),btnSubmit[0].classList.add("btn-disabled")},e=>{}),!1)})},document.body.onclick=function(e){e.target.classList.contains("ok-btn")&&hideMessage(messageBlock)};